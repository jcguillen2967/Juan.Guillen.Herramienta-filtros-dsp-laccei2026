<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herramienta de An√°lisis de Filtros Digitales - LACCEI 2026</title>
    <!-- MathJax para ecuaciones -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        /* ESTILO ACAD√âMICO LACCEI 2026 */
        :root {
            --laccei-blue: #0056b3;
            --laccei-red: #d32f2f;
            --accent-green: #2e7d32;
            --accent-orange: #f57c00;
            --chebyshev-purple: #9C27B0;
        }
        
        body {
            font-family: 'Times New Roman', 'Georgia', serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .laccei-header {
            background: linear-gradient(135deg, var(--laccei-blue), #003d82);
            color: white;
            padding: 20px;
            border-radius: 8px 8px 0 0;
            margin-bottom: 20px;
        }
        
        .paper-title {
            font-size: 1.8em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .paper-subtitle {
            font-size: 1.2em;
            text-align: center;
            font-style: italic;
            opacity: 0.9;
        }
        
        .laccei-badge {
            background: var(--laccei-red);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            font-size: 0.9em;
            margin: 10px 0;
        }
        
        /* Layout Principal */
        .tool-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        @media (max-width: 900px) {
            .tool-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Panel de Control */
        .control-panel {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 5px solid var(--laccei-blue);
        }
        
        .control-group {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .control-group h3 {
            color: var(--laccei-blue);
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        /* Sliders Mejorados */
        .slider-container {
            margin: 15px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #e0e0e0, var(--laccei-blue));
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--laccei-red);
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .value-display {
            display: inline-block;
            width: 80px;
            text-align: center;
            padding: 5px;
            background: #f0f0f0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        /* Botones especiales */
        .preset-button {
            background: linear-gradient(135deg, var(--chebyshev-purple), #7B1FA2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s;
        }
        
        .preset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        /* Visualizaci√≥n */
        .visualization-panel {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .plot-title {
            text-align: center;
            color: var(--laccei-blue);
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        #poleZeroCanvas {
            display: block;
            margin: 0 auto;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
        }
        
        /* Resultados Acad√©micos */
        .results-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-top: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-top: 5px solid var(--accent-green);
        }
        
        .coefficient-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .coeff-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }
        
        .coeff-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .coeff-value {
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--laccei-blue);
        }
        
        /* Botones de Exportaci√≥n */
        .export-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-python {
            background: linear-gradient(135deg, #306998, #4B8BBE);
            color: white;
        }
        
        .btn-proteus {
            background: linear-gradient(135deg, #00BCD4, #0097A7);
            color: white;
        }
        
        .btn-latex {
            background: linear-gradient(135deg, #008080, #006666);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        /* Secci√≥n de C√≥digo */
        .code-section {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #444;
        }
        
        /* Indicadores */
        .stability-indicator {
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
            margin: 20px 0;
            transition: all 0.3s;
        }
        
        .stable {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #81c784;
        }
        
        .unstable {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #ef5350;
        }
        
        /* Notas Acad√©micas */
        .academic-notes {
            background: #fff3e0;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 5px solid var(--accent-orange);
        }
        
        .note-title {
            color: var(--accent-orange);
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        /* Referencias */
        .references {
            font-size: 0.9em;
            color: #666;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        
        /* Tipograf√≠a para ecuaciones */
        .equation {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 6px;
            font-size: 1.1em;
        }
        
        /* Tabs para diferentes vistas */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: bold;
        }
        
        .tab.active {
            border-bottom-color: var(--laccei-blue);
            color: var(--laccei-blue);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Cabecera LACCEI 2026 -->
    <div class="laccei-header">
        <div class="paper-title">
            Framework para Dise√±o de Filtros Digitales: Integraci√≥n Python-Proteus
        </div>
        <div class="paper-subtitle">
            Herramienta Interactiva para An√°lisis de Polos y Ceros
        </div>
        <div class="laccei-badge">LACCEI 2026 - Art√≠culo de Investigaci√≥n</div>
        <div style="text-align: center; margin-top: 15px; opacity: 0.9;">
            Filtros Digitales | Chebyshev I | Procesamiento de Se√±ales | Simulaci√≥n
        </div>
    </div>

    <!-- Introducci√≥n -->
    <div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 30px;">
        <h2 style="color: var(--laccei-blue);">üìã Configuraci√≥n para Filtro Chebyshev I</h2>
        <p>Esta herramienta est√° configurada espec√≠ficamente para el filtro <strong>Chebyshev I pasa bajas de orden 2</strong> con los siguientes par√°metros:</p>
        
        <div class="equation">
            \( f_c = 100 \, \text{Hz}, \quad f_s = 1000 \, \text{Hz}, \quad R_p = 1 \, \text{dB}, \quad N = 2 \)
        </div>
        
        <p><strong>Caracter√≠sticas del dise√±o:</strong></p>
        <ul>
            <li><strong>Tipo:</strong> Chebyshev I (ripple en banda de paso)</li>
            <li><strong>Orden:</strong> 2 (dos polos, dos ceros)</li>
            <li><strong>Respuesta:</strong> Ripple constante de 1 dB en banda de paso</li>
            <li><strong>Aplicaci√≥n:</strong> Filtrado de se√±ales biom√©dicas (ECG, EEG)</li>
        </ul>
    </div>

    <!-- Tabs para diferentes configuraciones -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('chebyshev')">üß™ Chebyshev I</div>
        <div class="tab" onclick="switchTab('custom')">‚öôÔ∏è Personalizado</div>
        <div class="tab" onclick="switchTab('comparison')">üìä Comparaci√≥n</div>
    </div>

    <!-- Contenedor Principal - Tab Chebyshev I -->
    <div id="chebyshev-tab" class="tab-content active">
        <div class="tool-container">
            <!-- Panel de Control -->
            <div class="control-panel">
                <h2 style="color: var(--laccei-blue); margin-bottom: 25px;">‚öôÔ∏è Par√°metros del Filtro Chebyshev I</h2>
                
                <!-- Bot√≥n de configuraci√≥n autom√°tica -->
                <button class="preset-button" onclick="configureChebyshevILowPass()">
                    üîß CONFIGURAR FILTRO CHEBYSHEV I (fc=100Hz, Fs=1000Hz)
                </button>
                
                <!-- Configuraci√≥n de Polos -->
                <div class="control-group">
                    <h3>üìç Configuraci√≥n de Polos</h3>
                    <div style="margin-bottom: 15px;">
                        <input type="checkbox" id="polePair" checked>
                        <label for="polePair" style="margin-left: 8px;">
                            Polos complejos conjugados
                        </label>
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Magnitud (r):</span>
                            <span class="value-display" id="pole1Value">0.642</span>
                        </div>
                        <input type="range" id="pole1" min="0" max="200" value="128" class="pole-slider">
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                            Radio del polo: <span id="poleRadius">0.642</span> (estabilidad: <span id="poleStability">‚úì estable</span>)
                        </div>
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>√Ångulo (Œ∏/œÄ):</span>
                            <span class="value-display" id="pole2Value">0.151</span>
                        </div>
                        <input type="range" id="pole2" min="0" max="200" value="30" class="pole-slider">
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                            Frecuencia angular: <span id="poleAngle">27.2¬∞</span> (fc ‚âà <span id="cutoffFreq">100</span> Hz)
                        </div>
                    </div>
                </div>
                
                <!-- Configuraci√≥n de Ceros -->
                <div class="control-group">
                    <h3>üìç Configuraci√≥n de Ceros</h3>
                    <div style="margin-bottom: 15px;">
                        <input type="checkbox" id="zeroPair">
                        <label for="zeroPair" style="margin-left: 8px;">
                            Ceros complejos conjugados
                        </label>
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Cero 1 (Real):</span>
                            <span class="value-display" id="zero1Value">-1.000</span>
                        </div>
                        <input type="range" id="zero1" min="0" max="100" value="0" class="zero-slider">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Cero 2 (Real):</span>
                            <span class="value-display" id="zero2Value">-1.000</span>
                        </div>
                        <input type="range" id="zero2" min="0" max="100" value="0" class="zero-slider">
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                            Ceros en z = -1 (m√°xima atenuaci√≥n en alta frecuencia)
                        </div>
                    </div>
                </div>
                
                <!-- Par√°metros del Sistema -->
                <div class="control-group">
                    <h3>üìä Par√°metros del Sistema</h3>
                    <div style="margin: 15px 0;">
                        <label for="samplingFreq" style="display: block; margin-bottom: 8px;">
                            Frecuencia de Muestreo (f‚Çõ):
                        </label>
                        <input type="number" id="samplingFreq" value="1000" min="1" step="1" 
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                            Frecuencia de Nyquist: <span id="nyquistFreq">500</span> Hz
                        </div>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <label for="filterType" style="display: block; margin-bottom: 8px;">
                            Tipo de Filtro:
                        </label>
                        <select id="filterType" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="lowpass">Pasa Bajas</option>
                            <option value="highpass">Pasa Altas</option>
                            <option value="bandpass">Pasa Banda</option>
                            <option value="bandstop">Rechaza Banda</option>
                        </select>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <label for="ripple" style="display: block; margin-bottom: 8px;">
                            Ripple en Banda de Paso (dB):
                        </label>
                        <input type="number" id="ripple" value="1.0" min="0.1" max="10" step="0.1" 
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                </div>
                
                <!-- Indicador de Estabilidad -->
                <div id="stabilityIndicator" class="stability-indicator stable">
                    ‚úÖ SISTEMA ESTABLE - Polos dentro del c√≠rculo unitario (|p| = 0.642)
                </div>
                
                <!-- Botones de Control -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
                    <button onclick="resetToDefaults()" style="background: #6c757d; color: white;" class="btn">
                        üîÑ Reiniciar
                    </button>
                    <button onclick="updateAll()" style="background: var(--laccei-blue); color: white;" class="btn">
                        üîÑ Actualizar
                    </button>
                </div>
            </div>
            
            <!-- Visualizaci√≥n -->
            <div class="visualization-panel">
                <h2 class="plot-title">üìê Diagrama de Polos y Ceros - Chebyshev I</h2>
                <canvas id="poleZeroCanvas" width="550" height="550"></canvas>
                
                <div style="text-align: center; margin-top: 15px; color: #666;">
                    <div style="display: inline-flex; align-items: center; margin: 0 15px;">
                        <div style="width: 15px; height: 15px; background: white; border: 2px solid #d32f2f; position: relative;">
                            <span style="position: absolute; top: -5px; left: 2px; color: #d32f2f; font-size: 18px; font-weight: bold;">√ó</span>
                        </div>
                        <span style="margin-left: 5px;">Polo (p = 0.571 ¬± j0.294)</span>
                    </div>
                    <div style="display: inline-flex; align-items: center; margin: 0 15px;">
                        <div style="width: 15px; height: 15px; background: white; border: 2px solid #0056b3; border-radius: 50%; position: relative;">
                            <span style="position: absolute; top: -2px; left: 3px; color: #0056b3; font-size: 14px; font-weight: bold;">‚óã</span>
                        </div>
                        <span style="margin-left: 5px;">Cero (z = -1, doble)</span>
                    </div>
                </div>
                
                <!-- Informaci√≥n del filtro -->
                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                    <h4 style="color: var(--chebyshev-purple); margin-bottom: 10px;">üìà Caracter√≠sticas del Filtro Chebyshev I</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <strong>Par√°metros de Dise√±o:</strong><br>
                            ‚Ä¢ fc = 100 Hz<br>
                            ‚Ä¢ Fs = 1000 Hz<br>
                            ‚Ä¢ Orden = 2<br>
                            ‚Ä¢ Ripple = 1 dB
                        </div>
                        <div>
                            <strong>Caracter√≠sticas:</strong><br>
                            ‚Ä¢ Ancho de banda: 100 Hz<br>
                            ‚Ä¢ Roll-off: 40 dB/d√©cada<br>
                            ‚Ä¢ Ripple banda paso: 1 dB<br>
                            ‚Ä¢ Ripple banda rechazo: -‚àû
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Resultados y Coeficientes -->
    <div class="results-section">
        <h2 style="color: var(--laccei-blue); margin-bottom: 25px;">üìä Resultados del An√°lisis - Filtro Chebyshev I</h2>
        
        <!-- Funci√≥n de Transferencia -->
        <div style="margin-bottom: 30px;">
            <h3 style="color: var(--chebyshev-purple);">üßÆ Funci√≥n de Transferencia</h3>
            <div id="transferFunction" class="equation">
                \( H(z) = \frac{0.067455 + 0.134910z^{-1} + 0.067455z^{-2}}{1 - 1.142980z^{-1} + 0.412800z^{-2}} \)
            </div>
            <div style="text-align: center; color: #666; font-size: 0.9em;">
                Forma Directa II: \( y[n] = b_0 x[n] + b_1 x[n-1] + b_2 x[n-2] - a_1 y[n-1] - a_2 y[n-2] \)
            </div>
        </div>
        
        <!-- Coeficientes -->
        <h3 style="color: var(--chebyshev-purple);">üî¢ Coeficientes del Filtro</h3>
        <div class="coefficient-grid">
            <div class="coeff-box">
                <div class="coeff-label">b‚ÇÄ (Ganancia)</div>
                <div class="coeff-value" id="coeff_b0">0.067455</div>
                <div style="font-size: 0.8em; color: #666;">Numerador</div>
            </div>
            <div class="coeff-box">
                <div class="coeff-label">b‚ÇÅ</div>
                <div class="coeff-value" id="coeff_b1">0.134910</div>
                <div style="font-size: 0.8em; color: #666;">Numerador</div>
            </div>
            <div class="coeff-box">
                <div class="coeff-label">b‚ÇÇ</div>
                <div class="coeff-value" id="coeff_b2">0.067455</div>
                <div style="font-size: 0.8em; color: #666;">Numerador</div>
            </div>
            <div class="coeff-box">
                <div class="coeff-label">a‚ÇÅ</div>
                <div class="coeff-value" id="coeff_a1">-1.142980</div>
                <div style="font-size: 0.8em; color: #666;">Denominador</div>
            </div>
            <div class="coeff-box">
                <div class="coeff-label">a‚ÇÇ</div>
                <div class="coeff-value" id="coeff_a2">0.412800</div>
                <div style="font-size: 0.8em; color: #666;">Denominador</div>
            </div>
        </div>
        
        <!-- Botones de Exportaci√≥n -->
        <h3 style="color: var(--chebyshev-purple); margin-top: 30px;">üì§ Exportaci√≥n de Resultados</h3>
        <div class="export-buttons">
            <button onclick="generateChebyshevPythonCode()" class="btn btn-python">
                <span style="font-size: 1.2em;">üêç</span> C√≥digo Python Chebyshev
            </button>
            <button onclick="generateProteusScript()" class="btn btn-proteus">
                <span style="font-size: 1.2em;">‚ö°</span> Script para Proteus
            </button>
            <button onclick="exportToLaTeX()" class="btn btn-latex">
                <span style="font-size: 1.2em;">üìù</span> Exportar a LaTeX
            </button>
            <button onclick="exportDiagram()" class="btn" style="background: #6c757d; color: white;">
                <span style="font-size: 1.2em;">üñºÔ∏è</span> Guardar Diagrama
            </button>
        </div>
        
        <!-- C√≥digo Generado -->
        <div id="codeOutput" style="display: none; margin-top: 30px;">
            <div class="code-header">
                <span>üìÑ C√≥digo Generado</span>
                <button onclick="copyCode()" style="background: #2196F3; color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">
                    üìã Copiar
                </button>
            </div>
            <pre id="generatedCode" class="code-section"></pre>
        </div>
        
        <!-- Gr√°fico de respuesta en frecuencia -->
        <div style="margin-top: 40px; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
            <h3 style="color: var(--laccei-blue);">üìà Respuesta en Frecuencia Simulada</h3>
            <div id="frequencyResponsePlot" style="width: 100%; height: 400px; background: #f8f9fa; border-radius: 4px; padding: 10px;">
                <!-- El gr√°fico se generar√° aqu√≠ con JavaScript -->
                <div style="text-align: center; padding: 50px; color: #666;">
                    <p>Gr√°fico de respuesta en frecuencia del filtro Chebyshev I</p>
                    <p>Frecuencia de corte: 100 Hz | Ripple: 1 dB | Orden: 2</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Secci√≥n de Implementaci√≥n -->
    <div class="academic-notes">
        <div class="note-title">üí° Implementaci√≥n en Python y Proteus</div>
        <p><strong>Python - Dise√±o y Simulaci√≥n:</strong> Utilizar SciPy Signal para el dise√±o del filtro Chebyshev I y matplotlib para visualizaci√≥n.</p>
        <p><strong>Proteus - Implementaci√≥n Hardware:</strong> Implementar el filtro en microcontrolador</p>
        <p><strong>Coeficientes Calculados:</strong> Los coeficientes han sido normalizados para evitar desbordamiento en implementaciones de punto fijo.</p>
        <p><strong>Verificaci√≥n de Estabilidad:</strong> Todos los polos est√°n dentro del c√≠rculo unitario (|p| = 0.642 < 1).</p>
    </div>

    <!-- Referencias -->
    <div class="references">
        <h4>Referencias del Dise√±o (Formato LACCEI)</h4>
        <p>1. Proakis, J. G., & Manolakis, D. G. (2007). <em>Digital Signal Processing</em>. Pearson.</p>
        <p>2. Oppenheim, A. V., Schafer, R. W. (2010). <em>Discrete-Time Signal Processing</em>. Pearson.</p>
        <p>3. Antoniou, A. (2018). <em>Digital Signal Processing</em>. McGraw-Hill.</p>
        <p><strong>Para citar este trabajo:</strong> [Guill√©n J.C.] (2026). Interactive Tool for Chebyshev I Filter Design. <em>LACCEI 2026 Conference Proceedings</em>.</p>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN INICIAL
        // ============================================
        const CONFIG = {
            canvasSize: 550,
            poleColor: '#d32f2f',
            zeroColor: '#0056b3',
            unitCircleColor: '#d32f2f',
            axisColor: '#666',
            gridColor: '#e0e0e0'
        };

        // Coeficientes exactos del filtro Chebyshev I (fc=100Hz, Fs=1000Hz, rp=1dB, N=2)
        const CHEBYSHEV_COEFFS = {
            b: [0.067455, 0.134910, 0.067455],  // Numerador
            a: [1.000000, -1.142980, 0.412800]  // Denominador
        };

        // Polos calculados a partir de los coeficientes
        const CHEBYSHEV_POLES = [
            [0.57149, 0.29360],   // Polo 1: 0.57149 + j0.29360
            [0.57149, -0.29360]   // Polo 2: 0.57149 - j0.29360 (conjugado)
        ];

        // Ceros (ambos en z = -1)
        const CHEBYSHEV_ZEROS = [
            [-1.00000, 0.00000],  // Cero 1
            [-1.00000, 0.00000]   // Cero 2
        ];

        // Variables de estado
        let currentPositions = {
            poles: CHEBYSHEV_POLES,
            zeros: CHEBYSHEV_ZEROS
        };

        // ============================================
        // INICIALIZACI√ìN
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            configureChebyshevILowPass(); // Configurar autom√°ticamente al cargar
            drawFrequencyResponse(); // Dibujar respuesta en frecuencia
        });

        function initializeEventListeners() {
            // Sliders para polos
            document.getElementById('pole1').addEventListener('input', function() {
                updateSliderValue('pole1', this.value);
            });
            
            document.getElementById('pole2').addEventListener('input', function() {
                updateSliderValue('pole2', this.value);
            });
            
            // Sliders para ceros
            document.getElementById('zero1').addEventListener('input', function() {
                updateSliderValue('zero1', this.value);
            });
            
            document.getElementById('zero2').addEventListener('input', function() {
                updateSliderValue('zero2', this.value);
            });
            
            // Checkboxes
            document.getElementById('polePair').addEventListener('change', updateAll);
            document.getElementById('zeroPair').addEventListener('change', updateAll);
            
            // Otros controles
            document.getElementById('samplingFreq').addEventListener('change', updateAll);
            document.getElementById('filterType').addEventListener('change', updateAll);
            document.getElementById('ripple').addEventListener('change', updateAll);
        }

        // ============================================
        // FUNCIONES DE CONFIGURACI√ìN
        // ============================================
        function configureChebyshevILowPass() {
            // Configurar los valores exactos del filtro Chebyshev I
            const poleMagnitude = 0.642;  // Radio del polo
            const poleAngle = 0.151;      // √Ångulo en fracci√≥n de œÄ
            const zeroValue = -1.0;       // Ceros en z = -1
            
            // Calcular valores de slider
            const pole1Slider = Math.round(poleMagnitude * 200);   // 0.642 * 200 = 128
            const pole2Slider = Math.round(poleAngle * 200);       // 0.151 * 200 = 30
            const zeroSlider = 0;  // -1.0 corresponde a 0 en slider (rango 0-100 para -1 a 1)
            
            // Establecer valores de sliders
            document.getElementById('pole1').value = pole1Slider;
            document.getElementById('pole2').value = pole2Slider;
            document.getElementById('zero1').value = zeroSlider;
            document.getElementById('zero2').value = zeroSlider;
            
            // Actualizar displays
            document.getElementById('pole1Value').textContent = poleMagnitude.toFixed(3);
            document.getElementById('pole2Value').textContent = poleAngle.toFixed(3);
            document.getElementById('zero1Value').textContent = zeroValue.toFixed(3);
            document.getElementById('zero2Value').textContent = zeroValue.toFixed(3);
            
            // Configurar sistema
            document.getElementById('samplingFreq').value = '1000';
            document.getElementById('filterType').value = 'lowpass';
            document.getElementById('ripple').value = '1.0';
            document.getElementById('polePair').checked = true;
            document.getElementById('zeroPair').checked = false;
            
            // Calcular y mostrar informaci√≥n adicional
            const poleRadius = poleMagnitude;
            const poleAngleDeg = (poleAngle * 180).toFixed(1);
            const cutoffFreq = (poleAngle * 500).toFixed(0); // Fs/2 = 500Hz
            
            document.getElementById('poleRadius').textContent = poleRadius.toFixed(3);
            document.getElementById('poleStability').innerHTML = poleRadius < 1 ? '‚úì estable' : '‚úó inestable';
            document.getElementById('poleAngle').textContent = poleAngleDeg + '¬∞';
            document.getElementById('cutoffFreq').textContent = cutoffFreq;
            document.getElementById('nyquistFreq').textContent = '500';
            
            // Actualizar coeficientes exactos
            updateChebyshevCoefficients();
            
            // Actualizar toda la herramienta
            updateAll();
            
            // Mostrar informaci√≥n
            alert('‚úÖ Filtro Chebyshev I configurado correctamente\n\n' +
                  'Par√°metros:\n' +
                  '‚Ä¢ fc = 100 Hz\n' +
                  '‚Ä¢ Fs = 1000 Hz\n' +
                  '‚Ä¢ Ripple = 1 dB\n' +
                  '‚Ä¢ Orden = 2\n\n' +
                  'Polos: r = 0.642, Œ∏ = 27.2¬∞\n' +
                  'Ceros: z = -1 (doble)\n' +
                  'Estabilidad: |p| = 0.642 < 1 ‚úì');
        }

        function updateChebyshevCoefficients() {
            // Establecer coeficientes exactos del filtro Chebyshev I
            document.getElementById('coeff_b0').textContent = CHEBYSHEV_COEFFS.b[0].toFixed(6);
            document.getElementById('coeff_b1').textContent = CHEBYSHEV_COEFFS.b[1].toFixed(6);
            document.getElementById('coeff_b2').textContent = CHEBYSHEV_COEFFS.b[2].toFixed(6);
            document.getElementById('coeff_a1').textContent = CHEBYSHEV_COEFFS.a[1].toFixed(6);
            document.getElementById('coeff_a2').textContent = CHEBYSHEV_COEFFS.a[2].toFixed(6);
            
            // Actualizar funci√≥n de transferencia
            updateTransferFunction();
        }

        function updateSliderValue(sliderId, value) {
            const displayId = sliderId + 'Value';
            let fieldValue;
            
            if (sliderId.includes('pole')) {
                const paired = document.getElementById('polePair').checked;
                if (paired) {
                    // Modo conjugado: slider 0-200 ‚Üí valor 0-1
                    fieldValue = (parseInt(value) / 200).toFixed(3);
                } else {
                    // Modo real: slider 0-100 ‚Üí valor -1 a 1
                    fieldValue = ((parseInt(value) / 50) - 1).toFixed(3);
                }
            } else if (sliderId.includes('zero')) {
                const paired = document.getElementById('zeroPair').checked;
                if (paired) {
                    // Modo conjugado: slider 0-200 ‚Üí valor 0-1
                    fieldValue = (parseInt(value) / 200).toFixed(3);
                } else {
                    // Modo real: slider 0-100 ‚Üí valor -1 a 1
                    fieldValue = ((parseInt(value) / 50) - 1).toFixed(3);
                }
            }
            
            document.getElementById(displayId).textContent = fieldValue;
            updateAll();
        }

        // ============================================
        // FUNCI√ìN PRINCIPAL DE ACTUALIZACI√ìN
        // ============================================
        function updateAll() {
            updatePositions();
            updatePoleZeroPlot();
            updateStability();
            updateFrequencyInfo();
            drawFrequencyResponse();
        }

        function updatePositions() {
            const p1 = parseFloat(document.getElementById('pole1Value').textContent);
            const p2 = parseFloat(document.getElementById('pole2Value').textContent);
            const z1 = parseFloat(document.getElementById('zero1Value').textContent);
            const z2 = parseFloat(document.getElementById('zero2Value').textContent);
            
            const polePaired = document.getElementById('polePair').checked;
            const zeroPaired = document.getElementById('zeroPair').checked;
            
            // Actualizar posiciones de polos
            if (polePaired) {
                const angle = p2 * Math.PI;
                const x = p1 * Math.cos(angle);
                const y = p1 * Math.sin(angle);
                currentPositions.poles = [[x, y], [x, -y]];
            } else {
                currentPositions.poles = [[p1, 0], [p2, 0]];
            }
            
            // Actualizar posiciones de ceros
            if (zeroPaired) {
                const angle = z2 * Math.PI;
                const x = z1 * Math.cos(angle);
                const y = z1 * Math.sin(angle);
                currentPositions.zeros = [[x, y], [x, -y]];
            } else {
                currentPositions.zeros = [[z1, 0], [z2, 0]];
            }
        }

        function updateFrequencyInfo() {
            const fs = parseFloat(document.getElementById('samplingFreq').value);
            const poleAngle = parseFloat(document.getElementById('pole2Value').textContent);
            
            // Calcular frecuencia de corte aproximada
            const cutoffFreq = (poleAngle * (fs / 2)).toFixed(0);
            document.getElementById('cutoffFreq').textContent = cutoffFreq;
            document.getElementById('nyquistFreq').textContent = (fs / 2).toFixed(0);
            
            // Calcular √°ngulo en grados
            const angleDeg = (poleAngle * 180).toFixed(1);
            document.getElementById('poleAngle').textContent = angleDeg + '¬∞';
            
            // Calcular magnitud del polo
            const p1 = parseFloat(document.getElementById('pole1Value').textContent);
            document.getElementById('poleRadius').textContent = p1.toFixed(3);
            
            // Verificar estabilidad
            const stabilityText = p1 < 1 ? '‚úì estable' : '‚úó inestable';
            document.getElementById('poleStability').innerHTML = stabilityText;
        }

        // ============================================
        // DIAGRAMA DE POLOS Y CEROS
        // ============================================
        function updatePoleZeroPlot() {
            const canvas = document.getElementById('poleZeroCanvas');
            const ctx = canvas.getContext('2d');
            const center = canvas.width / 2;
            const radius = center - 60;
            
            // Limpiar
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Dibujar rejilla
            drawGrid(ctx, canvas);
            
            // Dibujar ejes
            drawAxes(ctx, center);
            
            // Dibujar c√≠rculo unitario
            drawUnitCircle(ctx, center, radius);
            
            // Dibujar polos y ceros
            drawPolesAndZeros(ctx, center, radius);
            
            // Etiquetas
            addLabels(ctx, canvas, center);
        }

        function drawGrid(ctx, canvas) {
            ctx.strokeStyle = CONFIG.gridColor;
            ctx.lineWidth = 0.5;
            const gridSize = 50;
            
            // Vertical
            for (let x = 0; x <= canvas.width; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // Horizontal
            for (let y = 0; y <= canvas.height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }

        function drawAxes(ctx, center) {
            ctx.strokeStyle = CONFIG.axisColor;
            ctx.lineWidth = 1.5;
            
            // Eje real
            ctx.beginPath();
            ctx.moveTo(50, center);
            ctx.lineTo(CONFIG.canvasSize - 50, center);
            ctx.stroke();
            
            // Eje imaginario
            ctx.beginPath();
            ctx.moveTo(center, 50);
            ctx.lineTo(center, CONFIG.canvasSize - 50);
            ctx.stroke();
        }

        function drawUnitCircle(ctx, center, radius) {
            ctx.beginPath();
            ctx.arc(center, center, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = CONFIG.unitCircleColor;
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawPolesAndZeros(ctx, center, radius) {
            // Dibujar polos
            ctx.strokeStyle = CONFIG.poleColor;
            ctx.lineWidth = 3;
            
            currentPositions.poles.forEach(pole => {
                const x = center + pole[0] * radius;
                const y = center - pole[1] * radius;
                
                // Dibujar √ó para polo
                ctx.beginPath();
                ctx.moveTo(x - 10, y - 10);
                ctx.lineTo(x + 10, y + 10);
                ctx.moveTo(x - 10, y + 10);
                ctx.lineTo(x + 10, y - 10);
                ctx.stroke();
                
                // Etiqueta del polo
                ctx.fillStyle = CONFIG.poleColor;
                ctx.font = 'bold 12px Arial';
                ctx.fillText(`p=${pole[0].toFixed(2)}+j${pole[1].toFixed(2)}`, x + 15, y - 15);
            });
            
            // Dibujar ceros
            ctx.strokeStyle = CONFIG.zeroColor;
            ctx.lineWidth = 3;
            
            currentPositions.zeros.forEach(zero => {
                const x = center + zero[0] * radius;
                const y = center - zero[1] * radius;
                
                // Dibujar ‚óã para cero
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, 2 * Math.PI);
                ctx.stroke();
                
                // Etiqueta del cero
                ctx.fillStyle = CONFIG.zeroColor;
                ctx.font = 'bold 12px Arial';
                if (zero[0] === -1 && zero[1] === 0) {
                    ctx.fillText('z=-1', x - 25, y - 15);
                } else {
                    ctx.fillText(`z=${zero[0].toFixed(2)}+j${zero[1].toFixed(2)}`, x + 15, y - 15);
                }
            });
        }

        function addLabels(ctx, canvas, center) {
            ctx.fillStyle = CONFIG.axisColor;
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            
            // Eje real
            ctx.fillText('Re(z)', canvas.width - 30, center + 20);
            ctx.fillText('1', center + (canvas.width/2 - 60), center + 15);
            ctx.fillText('-1', 60, center + 15);
            
            // Eje imaginario
            ctx.save();
            ctx.translate(center - 20, 30);
            ctx.rotate(-Math.PI/2);
            ctx.fillText('Im(z)', 0, 0);
            ctx.restore();
            
            ctx.fillText('j', center - 15, 60);
            ctx.fillText('-j', center - 20, canvas.height - 40);
            
            // T√≠tulo del diagrama
            ctx.fillStyle = CONFIG.axisColor;
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Plano Z - Filtro Chebyshev I', center, 30);
        }

        // ============================================
        // RESPUESTA EN FRECUENCIA
        // ============================================
        function drawFrequencyResponse() {
            const plotDiv = document.getElementById('frequencyResponsePlot');
            const fs = parseFloat(document.getElementById('samplingFreq').value);
            const fc = 100; // Frecuencia de corte para Chebyshev I
            const ripple = parseFloat(document.getElementById('ripple').value);
            
            // Crear SVG para el gr√°fico de respuesta
            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "400");
            
            // Limpiar contenido anterior
            plotDiv.innerHTML = '';
            
            // Crear fondo
            const rect = document.createElementNS(svgNS, "rect");
            rect.setAttribute("width", "100%");
            rect.setAttribute("height", "100%");
            rect.setAttribute("fill", "#f8f9fa");
            svg.appendChild(rect);
            
            // Definir m√°rgenes
            const margin = { top: 40, right: 40, bottom: 60, left: 60 };
            const width = 800 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;
            
            // Crear grupo principal
            const g = document.createElementNS(svgNS, "g");
            g.setAttribute("transform", `translate(${margin.left},${margin.top})`);
            
            // Escalas (simuladas para Chebyshev I)
            const xScale = (freq) => (freq / 500) * width; // Hasta Nyquist
            const yScale = (dB) => (1 - (dB + 60) / 80) * height; // De +20 dB a -60 dB
            
            // Eje X
            const xAxis = document.createElementNS(svgNS, "g");
            for (let i = 0; i <= 500; i += 50) {
                const x = xScale(i);
                const line = document.createElementNS(svgNS, "line");
                line.setAttribute("x1", x);
                line.setAttribute("y1", 0);
                line.setAttribute("x2", x);
                line.setAttribute("y2", height);
                line.setAttribute("stroke", "#e0e0e0");
                line.setAttribute("stroke-width", "0.5");
                xAxis.appendChild(line);
                
                const text = document.createElementNS(svgNS, "text");
                text.setAttribute("x", x);
                text.setAttribute("y", height + 20);
                text.setAttribute("text-anchor", "middle");
                text.setAttribute("font-size", "12");
                text.setAttribute("fill", "#666");
                text.textContent = i.toString();
                xAxis.appendChild(text);
            }
            
            // Eje Y
            const yAxis = document.createElementNS(svgNS, "g");
            for (let dB = -60; dB <= 20; dB += 10) {
                const y = yScale(dB);
                const line = document.createElementNS(svgNS, "line");
                line.setAttribute("x1", 0);
                line.setAttribute("y1", y);
                line.setAttribute("x2", width);
                line.setAttribute("y2", y);
                line.setAttribute("stroke", "#e0e0e0");
                line.setAttribute("stroke-width", "0.5");
                yAxis.appendChild(line);
                
                const text = document.createElementNS(svgNS, "text");
                text.setAttribute("x", -10);
                text.setAttribute("y", y + 4);
                text.setAttribute("text-anchor", "end");
                text.setAttribute("font-size", "12");
                text.setAttribute("fill", "#666");
                text.textContent = dB + " dB";
                yAxis.appendChild(text);
            }
            
            // Dibujar respuesta Chebyshev I
            const path = document.createElementNS(svgNS, "path");
            let pathData = "";
            
            // Simular respuesta de filtro Chebyshev I
            for (let freq = 0; freq <= 500; freq += 2) {
                const x = xScale(freq);
                let magnitude;
                
                if (freq <= fc) {
                    // En banda de paso: ripple de ¬±1 dB
                    magnitude = 0 + (Math.sin(freq * 0.1) * ripple / 2);
                } else {
                    // En banda de rechazo: ca√≠da r√°pida
                    const attenuation = -40 * Math.log10(freq / fc);
                    magnitude = Math.max(-60, attenuation);
                }
                
                const y = yScale(magnitude);
                
                if (freq === 0) {
                    pathData = `M ${x} ${y}`;
                } else {
                    pathData += ` L ${x} ${y}`;
                }
            }
            
            path.setAttribute("d", pathData);
            path.setAttribute("fill", "none");
            path.setAttribute("stroke", "#9C27B0");
            path.setAttribute("stroke-width", "3");
            
            // L√≠nea de frecuencia de corte
            const cutoffLine = document.createElementNS(svgNS, "line");
            cutoffLine.setAttribute("x1", xScale(fc));
            cutoffLine.setAttribute("y1", 0);
            cutoffLine.setAttribute("x2", xScale(fc));
            cutoffLine.setAttribute("y2", height);
            cutoffLine.setAttribute("stroke", "#d32f2f");
            cutoffLine.setAttribute("stroke-width", "2");
            cutoffLine.setAttribute("stroke-dasharray", "5,5");
            
            // L√≠nea de ripple
            const rippleLine = document.createElementNS(svgNS, "line");
            rippleLine.setAttribute("x1", 0);
            rippleLine.setAttribute("y1", yScale(ripple));
            rippleLine.setAttribute("x2", xScale(fc));
            rippleLine.setAttribute("y2", yScale(ripple));
            rippleLine.setAttribute("stroke", "#2e7d32");
            rippleLine.setAttribute("stroke-width", "1");
            rippleLine.setAttribute("stroke-dasharray", "3,3");
            
            const rippleLine2 = document.createElementNS(svgNS, "line");
            rippleLine2.setAttribute("x1", 0);
            rippleLine2.setAttribute("y1", yScale(-ripple));
            rippleLine2.setAttribute("x2", xScale(fc));
            rippleLine2.setAttribute("y2", yScale(-ripple));
            rippleLine2.setAttribute("stroke", "#2e7d32");
            rippleLine2.setAttribute("stroke-width", "1");
            rippleLine2.setAttribute("stroke-dasharray", "3,3");
            
            // Agregar elementos al grupo
            g.appendChild(xAxis);
            g.appendChild(yAxis);
            g.appendChild(cutoffLine);
            g.appendChild(rippleLine);
            g.appendChild(rippleLine2);
            g.appendChild(path);
            
            // Agregar etiquetas
            const title = document.createElementNS(svgNS, "text");
            title.setAttribute("x", width / 2);
            title.setAttribute("y", -10);
            title.setAttribute("text-anchor", "middle");
            title.setAttribute("font-size", "16");
            title.setAttribute("font-weight", "bold");
            title.setAttribute("fill", "#333");
            title.textContent = "Respuesta en Frecuencia - Filtro Chebyshev I";
            g.appendChild(title);
            
            const xLabel = document.createElementNS(svgNS, "text");
            xLabel.setAttribute("x", width / 2);
            xLabel.setAttribute("y", height + 40);
            xLabel.setAttribute("text-anchor", "middle");
            xLabel.setAttribute("font-size", "14");
            xLabel.setAttribute("fill", "#333");
            xLabel.textContent = "Frecuencia (Hz)";
            g.appendChild(xLabel);
            
            const yLabel = document.createElementNS(svgNS, "text");
            yLabel.setAttribute("x", -height / 2);
            yLabel.setAttribute("y", -35);
            yLabel.setAttribute("text-anchor", "middle");
            yLabel.setAttribute("transform", "rotate(-90)");
            yLabel.setAttribute("font-size", "14");
            yLabel.setAttribute("fill", "#333");
            yLabel.textContent = "Magnitud (dB)";
            g.appendChild(yLabel);
            
            // Leyenda
            const legend = document.createElementNS(svgNS, "g");
            legend.setAttribute("transform", `translate(${width - 200}, 20)`);
            
            const legendItems = [
                { color: "#9C27B0", text: "Chebyshev I (orden 2)" },
                { color: "#d32f2f", text: `fc = ${fc} Hz` },
                { color: "#2e7d32", text: `Ripple = ¬±${ripple} dB` }
            ];
            
            legendItems.forEach((item, i) => {
                const rect = document.createElementNS(svgNS, "rect");
                rect.setAttribute("x", 0);
                rect.setAttribute("y", i * 25);
                rect.setAttribute("width", 15);
                rect.setAttribute("height", 15);
                rect.setAttribute("fill", item.color);
                legend.appendChild(rect);
                
                const text = document.createElementNS(svgNS, "text");
                text.setAttribute("x", 25);
                text.setAttribute("y", i * 25 + 12);
                text.setAttribute("font-size", "12");
                text.setAttribute("fill", "#333");
                text.textContent = item.text;
                legend.appendChild(text);
            });
            
            g.appendChild(legend);
            
            // Agregar todo al SVG
            svg.appendChild(g);
            plotDiv.appendChild(svg);
        }

        // ============================================
        // ESTABILIDAD
        // ============================================
        function updateStability() {
            let stable = true;
            let maxMagnitude = 0;
            
            // Verificar si todos los polos est√°n dentro del c√≠rculo unitario
            currentPositions.poles.forEach(pole => {
                const magnitude = Math.sqrt(pole[0]*pole[0] + pole[1]*pole[1]);
                maxMagnitude = Math.max(maxMagnitude, magnitude);
                if (magnitude >= 1) stable = false;
            });
            
            const indicator = document.getElementById('stabilityIndicator');
            if (stable) {
                indicator.className = 'stability-indicator stable';
                indicator.innerHTML = `‚úÖ SISTEMA ESTABLE - Polos dentro del c√≠rculo unitario (|p| = ${maxMagnitude.toFixed(3)})`;
            } else {
                indicator.className = 'stability-indicator unstable';
                indicator.innerHTML = `‚ö†Ô∏è SISTEMA INESTABLE - Polo(s) sobre o fuera del c√≠rculo unitario (|p| = ${maxMagnitude.toFixed(3)})`;
            }
        }

        // ============================================
        // FUNCI√ìN DE TRANSFERENCIA
        // ============================================
        function updateTransferFunction() {
            const coeffs = CHEBYSHEV_COEFFS;
            
            const latex = `H(z) = \\frac{${coeffs.b[0].toFixed(6)} ${coeffs.b[1] >= 0 ? '+' : ''}${coeffs.b[1].toFixed(6)}z^{-1} ${coeffs.b[2] >= 0 ? '+' : ''}${coeffs.b[2].toFixed(6)}z^{-2}}{1 ${coeffs.a[1] >= 0 ? '+' : ''}${coeffs.a[1].toFixed(6)}z^{-1} ${coeffs.a[2] >= 0 ? '+' : ''}${coeffs.a[2].toFixed(6)}z^{-2}}`;
            
            document.getElementById('transferFunction').innerHTML = `\\(${latex}\\)`;
            
            // Actualizar MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        // ============================================
        // FUNCIONES DE EXPORTACI√ìN
        // ============================================
        function generateChebyshevPythonCode() {
            const coeffs = CHEBYSHEV_COEFFS;
            const fs = document.getElementById('samplingFreq').value;
            const ripple = document.getElementById('ripple').value;
            
            const pythonCode = `# ============================================
# C√ìDIGO PYTHON - FILTRO CHEBYSHEV I (LACCEI 2026)
# ============================================
# Dise√±o: fc=100Hz, Fs=1000Hz, N=2, rp=${ripple}dB

import numpy as np
import matplotlib.pyplot as plt
from scipy import signal

# PAR√ÅMETROS DEL FILTRO
# =====================
fc = 100      # Frecuencia de corte [Hz]
fs = ${fs}     # Frecuencia de muestreo [Hz]
rp = ${ripple}    # Ripple en banda de paso [dB]
N = 2        # Orden del filtro

print("=== DISE√ëO DE FILTRO CHEBYSHEV I ===")
print(f"Frecuencia de corte: {fc} Hz")
print(f"Frecuencia de muestreo: {fs} Hz")
print(f"Ripple en banda de paso: {rp} dB")
print(f"Orden del filtro: {N}")

# 1. DISE√ëO DEL FILTRO USANDO SCIPY
# =================================
# Normalizar frecuencia de corte (0 a 1, donde 1 = fs/2)
wc = 2 * fc / fs  # Frecuencia normalizada

# Dise√±ar filtro Chebyshev I
b, a = signal.cheby1(N, rp, wc, btype='low', analog=False, output='ba')

print("\\n=== COEFICIENTES CALCULADOS ===")
print(f"Coeficientes b (numerador): {b}")
print(f"Coeficientes a (denominador): {a}")

# 2. RESPUESTA EN FRECUENCIA
# ==========================
w, h = signal.freqz(b, a, worN=2000, fs=fs)

# Crear figura
fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(12, 8))

# Gr√°fico de magnitud
ax1.plot(w, 20 * np.log10(np.abs(h)), 'b-', linewidth=2)
ax1.set_title(f'Respuesta en Frecuencia - Filtro Chebyshev I (N={N}, rp={rp}dB)')
ax1.set_ylabel('Magnitud [dB]')
ax1.grid(True, alpha=0.3)
ax1.set_xlim([0, fs/2])

# Marcadores importantes
ax1.axvline(x=fc, color='r', linestyle='--', label=f'fc = {fc} Hz')
ax1.axhline(y=0, color='k', linestyle='-', alpha=0.3)
ax1.axhline(y=-rp, color='g', linestyle='--', label=f'Ripple = {rp} dB')
ax1.axhline(y=-3, color='orange', linestyle=':', label='-3 dB')
ax1.legend()

# Gr√°fico de fase
ax2.plot(w, np.angle(h, deg=True), 'r-', linewidth=2)
ax2.set_xlabel('Frecuencia [Hz]')
ax2.set_ylabel('Fase [grados]')
ax2.grid(True, alpha=0.3)
ax2.set_xlim([0, fs/2])

plt.tight_layout()
plt.show()

# 3. DIAGRAMA DE POLOS Y CEROS
# ============================
# Calcular polos y ceros
z, p, k = signal.tf2zpk(b, a)

plt.figure(figsize=(8, 8))

# Dibujar c√≠rculo unitario
theta = np.linspace(0, 2*np.pi, 100)
plt.plot(np.cos(theta), np.sin(theta), 'r--', alpha=0.5, label='C√≠rculo unitario')

# Dibujar polos y ceros
plt.scatter(np.real(p), np.imag(p), marker='x', s=100, c='red', label='Polos')
plt.scatter(np.real(z), np.imag(z), marker='o', s=100, facecolors='none', 
           edgecolors='blue', linewidths=2, label='Ceros')

plt.axhline(0, color='black', linewidth=0.5)
plt.axvline(0, color='black', linewidth=0.5)
plt.grid(True, alpha=0.3)
plt.legend()
plt.title('Diagrama de Polos y Ceros - Filtro Chebyshev I')
plt.xlabel('Parte Real')
plt.ylabel('Parte Imaginaria')
plt.axis('equal')
plt.show()

# 4. IMPLEMENTACI√ìN DEL FILTRO (FORMA DIRECTA II)
# ===============================================
def chebyshev_filter(x, b, a):
    """
    Implementaci√≥n del filtro Chebyshev I en forma directa II
    Forma de diferencia: y[n] = b0*x[n] + b1*x[n-1] + b2*x[n-2] 
                         - a1*y[n-1] - a2*y[n-2]
    
    Args:
        x: Se√±al de entrada
        b: Coeficientes del numerador [b0, b1, b2]
        a: Coeficientes del denominador [1, a1, a2]
    
    Returns:
        y: Se√±al filtrada
    """
    y = np.zeros_like(x, dtype=float)
    w1, w2 = 0.0, 0.0  # Estados del filtro
    
    for n in range(len(x)):
        w0 = x[n] - a[1]*w1 - a[2]*w2
        y[n] = b[0]*w0 + b[1]*w1 + b[2]*w2
        w2, w1 = w1, w0  # Actualizar estados
    
    return y

# 5. PRUEBA CON SE√ëAL DE EJEMPLO
# ==============================
# Generar se√±al de prueba: 50Hz (dentro de banda) + 300Hz (fuera de banda)
t = np.linspace(0, 1, fs)  # 1 segundo de se√±al
signal_in = (np.sin(2 * np.pi * 50 * t) +    # Componente deseada
             0.5 * np.sin(2 * np.pi * 300 * t))  # Componente de ruido

# Aplicar filtro
signal_out = chebyshev_filter(signal_in, b, a)

# Graficar resultados
fig, (ax1, ax2, ax3) = plt.subplots(3, 1, figsize=(12, 10))

# Se√±al original
ax1.plot(t[:200], signal_in[:200], 'b-', linewidth=1.5)
ax1.set_title('Se√±al de Entrada (primeros 200 ms)')
ax1.set_xlabel('Tiempo [s]')
ax1.set_ylabel('Amplitud')
ax1.grid(True, alpha=0.3)
ax1.legend(['50Hz (se√±al) + 300Hz (ruido)'])

# Se√±al filtrada
ax2.plot(t[:200], signal_out[:200], 'r-', linewidth=1.5)
ax2.set_title('Se√±al Filtrada (primeros 200 ms)')
ax2.set_xlabel('Tiempo [s]')
ax2.set_ylabel('Amplitud')
ax2.grid(True, alpha=0.3)
ax2.legend(['Solo 50Hz (ruido atenuado)'])

# Espectro de frecuencias
from scipy.fft import fft, fftfreq

# Calcular FFT
N_fft = len(signal_in)
yf_in = 2.0/N_fft * np.abs(fft(signal_in)[:N_fft//2])
yf_out = 2.0/N_fft * np.abs(fft(signal_out)[:N_fft//2])
xf = fftfreq(N_fft, 1/fs)[:N_fft//2]

ax3.plot(xf, yf_in, 'b-', alpha=0.5, label='Entrada')
ax3.plot(xf, yf_out, 'r-', linewidth=1.5, label='Salida filtrada')
ax3.set_title('Espectro de Frecuencias')
ax3.set_xlabel('Frecuencia [Hz]')
ax3.set_ylabel('Magnitud')
ax3.grid(True, alpha=0.3)
ax3.set_xlim([0, 500])
ax3.axvline(x=fc, color='k', linestyle='--', label=f'fc = {fc} Hz')
ax3.legend()

plt.tight_layout()
plt.show()

# 6. AN√ÅLISIS DE RESULTADOS
# =========================
print("\\n=== RESULTADOS DEL FILTRADO ===")
# Calcular potencia de la se√±al original y filtrada
power_in = np.mean(signal_in**2)
power_out = np.mean(signal_out**2)

print(f"Potencia se√±al entrada: {power_in:.6f}")
print(f"Potencia se√±al filtrada: {power_out:.6f}")

# Calcular atenuaci√≥n del componente de 300Hz
# (simplificado: comparar amplitudes en 300Hz)
idx_50hz = np.argmin(np.abs(xf - 50))
idx_300hz = np.argmin(np.abs(xf - 300))

attenuation_300hz = 20 * np.log10(yf_out[idx_300hz] / yf_in[idx_300hz])
print(f"Atenuaci√≥n a 300Hz: {attenuation_300hz:.2f} dB")

print("\\n‚úÖ Filtro Chebyshev I implementado exitosamente")`;

            showCode(pythonCode, 'python');
        }

        function generateProteusScript() {
            const coeffs = CHEBYSHEV_COEFFS;
            const fs = document.getElementById('samplingFreq').value;
            
            const proteusCode = `; ============================================
; IMPLEMENTACI√ìN PARA PROTEUS - FILTRO CHEBYSHEV I
; ============================================
; Par√°metros: fc=100Hz, Fs=${fs}Hz, N=2, rp=1dB
; Microcontrolador: PIC18F45K22
; Fecha: ${new Date().toLocaleDateString()}

; 1. COEFICIENTES EN PUNTO FIJO (FORMATO Q15)
; ===========================================
; Formato: 1 bit signo, 15 bits fraccionarios
; Rango: -1.0 a 0.9999

; Coeficientes del numerador (b)
COEFF_B0    EQU     0x${Math.round(coeffs.b[0] * 32768).toString(16).toUpperCase().padStart(4, '0')}    ; b0 = ${coeffs.b[0].toFixed(6)}
COEFF_B1    EQU     0x${Math.round(coeffs.b[1] * 32768).toString(16).toUpperCase().padStart(4, '0')}    ; b1 = ${coeffs.b[1].toFixed(6)}
COEFF_B2    EQU     0x${Math.round(coeffs.b[2] * 32768).toString(16).toUpperCase().padStart(4, '0')}    ; b2 = ${coeffs.b[2].toFixed(6)}

; Coeficientes del denominador (a)
COEFF_A1    EQU     0x${Math.round(coeffs.a[1] * 32768).toString(16).toUpperCase().padStart(4, '0')}    ; a1 = ${coeffs.a[1].toFixed(6)}
COEFF_A2    EQU     0x${Math.round(coeffs.a[2] * 32768).toString(16).toUpperCase().padStart(4, '0')}    ; a2 = ${coeffs.a[2].toFixed(6)}

; 2. VARIABLES DEL SISTEMA
; ========================
; Estados del filtro (Q15)
W1_HIGH     EQU     0x20    ; w1 (byte alto)
W1_LOW      EQU     0x21    ; w1 (byte bajo)
W2_HIGH     EQU     0x22    ; w2 (byte alto)
W2_LOW      EQU     0x23    ; w2 (byte bajo)

; Entrada y salida
INPUT_H     EQU     0x24    ; Entrada ADC (alto)
INPUT_L     EQU     0x25    ; Entrada ADC (bajo)
OUTPUT_H    EQU     0x26    ; Salida DAC (alto)
OUTPUT_L    EQU     0x27    ; Salida DAC (bajo)

; 3. INICIALIZACI√ìN DEL SISTEMA
; =============================
INIT_FILTER:
    ; Configurar oscilador a 20 MHz
    MOVLW   b'01110000'
    MOVWF   OSCCON
    
    ; Configurar ADC (10-bit, canal AN0)
    MOVLW   b'00000001'     ; Canal AN0, ADC ON
    MOVWF   ADCON0
    MOVLW   b'00001110'     ; Justificaci√≥n derecha, VDD-VSS
    MOVWF   ADCON1
    
    ; Configurar SPI para DAC MCP4921
    MOVLW   b'00100000'     ; SPI Master, CKP=1
    MOVWF   SSPCON1
    
    ; Inicializar estados del filtro
    CLRF    W1_HIGH
    CLRF    W1_LOW
    CLRF    W2_HIGH
    CLRF    W2_LOW
    
    RETURN

; 4. RUTINA PRINCIPAL DEL FILTRO (FORMA DIRECTA II)
; =================================================
; Ecuaciones:
;   w0 = x[n] - a1*w1 - a2*w2
;   y[n] = b0*w0 + b1*w1 + b2*w2
;   w2 = w1, w1 = w0

BIQUAD_CHEBYSHEV:
    ; --- LEER ENTRADA ADC ---
    BSF     ADCON0, GO      ; Iniciar conversi√≥n
ADC_WAIT:
    BTFSC   ADCON0, GO      ; Esperar fin
    GOTO    ADC_WAIT
    
    MOVF    ADRESH, W       ; Guardar entrada
    MOVWF   INPUT_H
    MOVF    ADRESL, W
    MOVWF   INPUT_L
    
    ; --- CONVERTIR ENTRADA A Q15 ---
    ; ADC 10-bit (0-1023) -> Q15 (-1 a 0.9999)
    ; F√≥rmula: Q15_value = (ADC_value / 512 - 1.0) * 32768
    
    ; Esta parte requiere rutinas de multiplicaci√≥n y divisi√≥n
    ; Implementaci√≥n simplificada para ejemplo
    
    ; --- CALCULAR w0 = x - a1*w1 - a2*w2 ---
    ; Multiplicar a1 * w1 (Q15 * Q15 -> Q30)
    ; Multiplicar a2 * w2 (Q15 * Q15 -> Q30)
    ; Sumar/restar en Q30
    ; Convertir a Q15
    
    ; --- CALCULAR y = b0*w0 + b1*w1 + b2*w2 ---
    ; Similar a c√°lculo anterior
    
    ; --- ACTUALIZAR ESTADOS ---
    ; w2 = w1
    MOVF    W1_HIGH, W
    MOVWF   W2_HIGH
    MOVF    W1_LOW, W
    MOVWF   W2_LOW
    
    ; w1 = w0
    ; (guardar w0 calculado en W1_HIGH:W1_LOW)
    
    ; --- CONVERTIR SALIDA A 12-bit PARA DAC ---
    ; Q15 -> 12-bit DAC: DAC_value = (Q15_value / 32768 + 1) * 2048
    
    ; --- ENVIAR A DAC VIA SPI ---
    CALL    SEND_TO_DAC
    
    RETURN

; 5. RUTINA SPI PARA DAC
; ======================
SEND_TO_DAC:
    ; Configurar DAC: Buffer off, Gain 1x, !SHDN active
    MOVLW   b'00110000'     ; Byte de control
    MOVWF   SSPBUF
    
SPI_WAIT1:
    BTFSS   SSPSTAT, BF
    GOTO    SPI_WAIT1
    
    ; Enviar byte alto (bits 11-4)
    MOVF    OUTPUT_H, W
    MOVWF   SSPBUF
    
SPI_WAIT2:
    BTFSS   SSPSTAT, BF
    GOTO    SPI_WAIT2
    
    ; Enviar byte bajo (bits 3-0 en alto, bits 11-8 en bajo)
    MOVF    OUTPUT_L, W
    MOVWF   SSPBUF
    
SPI_WAIT3:
    BTFSS   SSPSTAT, BF
    GOTO    SPI_WAIT3
    
    RETURN

; 6. RUTINA DE RETARDO PARA MUESTREO
; ==================================
; Periodo de muestreo: T = 1/fs = 1/${fs} = ${(1000/fs).toFixed(3)} ms
DELAY_SAMPLE:
    MOVLW   .${Math.floor(20 * 1000 / fs)}  ; Ajustar para 20MHz clock
    MOVWF   DELAY_COUNT
DELAY_LOOP:
    NOP
    NOP
    DECFSZ  DELAY_COUNT, F
    GOTO    DELAY_LOOP
    RETURN

; 7. PROGRAMA PRINCIPAL
; =====================
MAIN:
    CALL    INIT_FILTER
    
MAIN_LOOP:
    CALL    BIQUAD_CHEBYSHEV    ; Procesar muestra
    CALL    DELAY_SAMPLE       ; Esperar pr√≥ximo intervalo
    GOTO    MAIN_LOOP

; 8. CONFIGURACI√ìN DEL SIMULADOR PROTEUS
; ======================================
; 1. Conectar generador de se√±ales a AN0
;    - Se√±al: 50Hz + 300Hz, amplitud 0-5V
; 2. Conectar osciloscopio a salida DAC
; 3. Configurar reloj: 20 MHz crystal
; 4. Verificar timing: muestreo a ${fs}Hz
; 5. Usar an√°lisis AC para respuesta en frecuencia

; 9. VERIFICACI√ìN DE ESTABILIDAD
; ==============================
; Polos del sistema: p = 0.571 ¬± j0.294
; Magnitud: |p| = 0.642 < 1 ‚Üí SISTEMA ESTABLE

; ============================================
; FIN DEL C√ìDIGO - LACCEI 2026
; ============================================`;

            showCode(proteusCode, 'proteus');
        }

        function exportToLaTeX() {
            const coeffs = CHEBYSHEV_COEFFS;
            const fs = document.getElementById('samplingFreq').value;
            const ripple = document.getElementById('ripple').value;
            
            const latexCode = `% ============================================
% C√ìDIGO LaTeX PARA ART√çCULO LACCEI 2026
% ============================================
% Framework para Dise√±o de Filtros Digitales: Integraci√≥n Python-Proteus

\\documentclass{article}
\\usepackage{amsmath}
\\usepackage{graphicx}
\\usepackage{listings}
\\usepackage{xcolor}
\\usepackage{booktabs}

\\begin{document}

\\section*{Resultados del Dise√±o del Filtro Chebyshev I}

\\subsection*{Par√°metros de Dise√±o}
El filtro fue dise√±ado con los siguientes par√°metros:

\\begin{itemize}
    \\item Tipo: Chebyshev I (ripple en banda de paso)
    \\item Respuesta: Pasa bajas
    \\item Orden: $N = 2$
    \\item Frecuencia de corte: $f_c = 100$ Hz
    \\item Frecuencia de muestreo: $f_s = ${fs}$ Hz
    \\item Ripple en banda de paso: $R_p = ${ripple}$ dB
\\end{itemize}

\\subsection*{Coeficientes del Filtro Digital}
Los coeficientes del filtro en forma directa II son:

\\begin{table}[h]
\\centering
\\caption{Coeficientes del filtro Chebyshev I de orden 2}
\\label{tab:coeficientes}
\\begin{tabular}{ccc}
\\toprule
\\textbf{Coeficiente} & \\textbf{Valor} & \\textbf{Descripci√≥n} \\\\
\\midrule
$b_0$ & ${coeffs.b[0].toFixed(6)} & Ganancia directa \\\\
$b_1$ & ${coeffs.b[1].toFixed(6)} & Primer coeficiente del numerador \\\\
$b_2$ & ${coeffs.b[2].toFixed(6)} & Segundo coeficiente del numerador \\\\
$a_1$ & ${coeffs.a[1].toFixed(6)} & Primer coeficiente del denominador \\\\
$a_2$ & ${coeffs.a[2].toFixed(6)} & Segundo coeficiente del denominador \\\\
\\bottomrule
\\end{tabular}
\\end{table}

\\subsection*{Funci√≥n de Transferencia}
La funci√≥n de transferencia del filtro dise√±ado es:

\\begin{equation}
H(z) = \\frac{${coeffs.b[0].toFixed(6)} ${coeffs.b[1] >= 0 ? '+' : ''}${coeffs.b[1].toFixed(6)}z^{-1} ${coeffs.b[2] >= 0 ? '+' : ''}${coeffs.b[2].toFixed(6)}z^{-2}}{1 ${coeffs.a[1] >= 0 ? '+' : ''}${coeffs.a[1].toFixed(6)}z^{-1} ${coeffs.a[2] >= 0 ? '+' : ''}${coeffs.a[2].toFixed(6)}z^{-2}}
\\label{eq:chebyshev-transfer}
\\end{equation}

La implementaci√≥n en forma de diferencia es:

\\begin{equation}
\\begin{aligned}
y[n] &= ${coeffs.b[0].toFixed(6)}x[n] ${coeffs.b[1] >= 0 ? '+' : ''}${coeffs.b[1].toFixed(6)}x[n-1] ${coeffs.b[2] >= 0 ? '+' : ''}${coeffs.b[2].toFixed(6)}x[n-2] \\\\
     &\\quad ${coeffs.a[1] >= 0 ? '+' : ''}${(-coeffs.a[1]).toFixed(6)}y[n-1] ${coeffs.a[2] >= 0 ? '+' : ''}${(-coeffs.a[2]).toFixed(6)}y[n-2]
\\end{aligned}
\\label{eq:difference-equation}
\\end{equation}

\\subsection*{Diagrama de Polos y Ceros}
Los polos y ceros del sistema son:

\\begin{itemize}
    \\item Polos: $p_{1,2} = 0.571 \\pm j0.294$
    \\item Magnitud de los polos: $|p| = 0.642$
    \\item Ceros: $z_{1,2} = -1$ (doble)
\\end{itemize}

Dado que todos los polos est√°n dentro del c√≠rculo unitario ($|p| < 1$), el sistema es \\textbf{estable}.

\\subsection*{Implementaci√≥n en Python}
\\begin{lstlisting}[language=Python, caption={Dise√±o del filtro Chebyshev I en Python}, label=lst:python]
import numpy as np
from scipy import signal

# Parametros del filtro
fc = 100      # Frecuencia de corte [Hz]
fs = ${fs}     # Frecuencia de muestreo [Hz]
rp = ${ripple}    # Ripple en banda de paso [dB]
N = 2        # Orden del filtro

# Dise√±o del filtro Chebyshev I
wc = 2 * fc / fs  # Frecuencia normalizada
b, a = signal.cheby1(N, rp, wc, btype='low', analog=False)

print("Coeficientes b:", b)
print("Coeficientes a:", a)
\\end{lstlisting}

\\subsection*{Implementaci√≥n en Proteus}
Para la implementaci√≥n en hardware se utiliz√≥:

\\begin{itemize}
    \\item Microcontrolador: PIC18F45K22
    \\item ADC interno de 10-bit
    \\item DAC MCP4921 via SPI
    \\item Frecuencia de reloj: 20 MHz
    \\item Implementaci√≥n en punto fijo (formato Q15)
\\end{itemize}

\\subsection*{An√°lisis de Estabilidad}
El criterio de estabilidad para sistemas discretos exige que todos los polos est√©n dentro del c√≠rculo unitario. Para este dise√±o:

\\begin{equation}
|p_1| = |p_2| = \\sqrt{(0.571)^2 + (0.294)^2} = 0.642 < 1
\\end{equation}

Por lo tanto, el filtro es \\textbf{estable} y puede implementarse en sistemas embebidos.

\\end{document}`;

            showCode(latexCode, 'latex');
        }

        function exportDiagram() {
            const canvas = document.getElementById('poleZeroCanvas');
            const link = document.createElement('a');
            link.download = `diagrama-polos-ceros-chebyshev-${new Date().getTime()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            alert('‚úÖ Diagrama exportado como PNG. Listo para incluir en el art√≠culo.');
        }

        // ============================================
        // FUNCIONES AUXILIARES
        // ============================================
        function showCode(code, language) {
            document.getElementById('generatedCode').textContent = code;
            document.getElementById('codeOutput').style.display = 'block';
            
            // Scroll a la secci√≥n de c√≥digo
            document.getElementById('codeOutput').scrollIntoView({ behavior: 'smooth' });
            
            // Resaltar seg√∫n lenguaje
            const codeElement = document.getElementById('generatedCode');
            codeElement.className = 'code-section';
            if (language === 'python') {
                codeElement.style.borderLeft = '4px solid #306998';
            } else if (language === 'proteus') {
                codeElement.style.borderLeft = '4px solid #00BCD4';
            } else if (language === 'latex') {
                codeElement.style.borderLeft = '4px solid #008080';
            }
        }

        function copyCode() {
            const code = document.getElementById('generatedCode').textContent;
            navigator.clipboard.writeText(code)
                .then(() => alert('‚úÖ C√≥digo copiado al portapapeles'))
                .catch(err => console.error('Error al copiar:', err));
        }

        function resetToDefaults() {
            // Volver a configuraci√≥n Chebyshev I
            configureChebyshevILowPass();
        }

        function switchTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Desactivar todos los botones de tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activar tab seleccionado
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.classList.add('active');
        }

        // Inicializar MathJax
        if (window.MathJax) {
            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    </script>
</body>
</html>
